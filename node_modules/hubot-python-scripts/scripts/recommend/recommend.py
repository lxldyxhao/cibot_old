#encoding:utf-8
import jieba.posseg as pseg
import gensim
import logging

def recommend_persons():
  # usr = [['张三', '计算机', '电子', '中国'], ['李四', '音乐', '艺术', '美国'], ['王五', '经济', '管理', '法国'], ['小明', '航天', '航空', '北京航空航天大学']]
  test_model = gensim.models.Word2Vec.load_word2vec_format('vectors.bin', binary=True)
  textin=raw_input('please input a question!\n')
  words =pseg.cut(textin)
  maxdistance = 0
  flag = 0;
  for w in words:
    print w.word,w.flag
    if ((w.flag==u'n')|(w.flag==u'nr')|(w.flag==u'ns')|(w.flag==u'nt')|(w.flag==u'nz')|(w.flag==u'Ng')|(w.flag==u'j')):
      flag = 1;
      for i in usr:
        j=1
        while j<len(i):
          tag = i[j].decode('utf-8')
          distance = test_model.similarity(w.word,tag)
          if(distance>maxdistance):
            maxdistance = distance
            target = i
          j+=1
  if flag==1:
    print target[0]
  else:
    print("无法识别的问题")
	#print w.word,w.flag

if __name__ == '__main__':
  recommend_persons()

